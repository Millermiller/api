webpackJsonp([0],{511:function(t,n,a){var e=a(0)(a(536),a(537),null,null,null);t.exports=e.exports},536:function(t,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={data:function(){return{users:[],search:"",loading:!1}},components:{},mounted:function(){this.load()},methods:{load:function(){var t=this;this.loading=!0,this.$http.get("/admin/users").then(function(n){t.users=n.body,t.loading=!1},function(t){console.log(t)})},edit:function(t){this.$router.push({name:"Юзер",params:{id:t.id}})},remove:function(t){var n=this;confirm("Удалить?")&&this.$http.delete("/admin/users/"+t.id).then(function(t){204===t.status?(n.$snackbar.open("Пользователь удален!"),n.load()):n.$snackbar.open("Ошибка!")},function(t){n.$snackbar.open("Ошибка!"),console.log(t)})},find:function(){var t=this;this.$http.get("/admin/users/search?q="+this.search).then(function(n){t.users=n.body},function(n){t.$snackbar.open("Ошибка!"),console.log(n)})},type:function(t){return new Date(t)<new Date?"is-warning":"is-success"},color:function(t){return 1===t?"green-plan":2===t?"red-plan":3===t?"blue-plan":void 0}}}},537:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",[a("div",{staticClass:"tile is-ancestor"},[a("div",{staticClass:"tile is-parent"},[a("article",{staticClass:"tile is-child box"},[a("b-field",[a("b-input",{attrs:{placeholder:"Поиск...",type:"search",icon:"magnify"},model:{value:t.search,callback:function(n){t.search=n},expression:"search"}}),t._v(" "),a("p",{staticClass:"control"},[a("button",{staticClass:"button is-info",on:{click:t.find}},[t._v("Search")])])],1),t._v(" "),a("b-table",{attrs:{data:t.users,paginated:"",narrowed:"",loading:t.loading,"per-page":"10"},scopedSlots:t._u([{key:"default",fn:function(n){return[a("b-table-column",{attrs:{field:"id",label:"ID",width:"40",sortable:"",numeric:""}},[t._v("\n                            "+t._s(n.row.id)+"\n                        ")]),t._v(" "),a("b-table-column",{attrs:{field:"avatar",label:"",width:"90"}},[a("img",{class:["avatar-small"],attrs:{src:n.row.avatar}})]),t._v(" "),a("b-table-column",{attrs:{field:"login",label:"Login",sortable:""}},[t._v("\n                            "+t._s(n.row.login)+"\n                        ")]),t._v(" "),a("b-table-column",{attrs:{field:"email",label:"Email",sortable:""}},[t._v("\n                            "+t._s(n.row.email)+"\n                        ")]),t._v(" "),a("b-table-column",{attrs:{field:"plan.name",label:"plan",sortable:""}},[a("span",{class:t.color(n.row.plan.id)},[t._v(t._s(n.row.plan.name))])]),t._v(" "),a("b-table-column",{attrs:{field:"date",label:"active_to",sortable:"",centered:""}},[a("span",{staticClass:"tag",class:t.type(n.row.active_to)},[t._v("\n                                "+t._s(new Date(n.row.active_to).toLocaleDateString())+"\n                            ")])]),t._v(" "),a("b-table-column",{attrs:{"custom-key":"actions"}},[a("button",{staticClass:"button  is-warning",on:{click:function(a){t.edit(n.row)}}},[a("b-icon",{attrs:{icon:"account-edit",size:"is-small"}})],1),t._v(" "),a("button",{staticClass:"button  is-danger",on:{click:function(a){t.remove(n.row)}}},[a("b-icon",{attrs:{icon:"account-remove",size:"is-small"}})],1)])]}}])})],1)])])])},staticRenderFns:[]}}});
//# sourceMappingURL=0.227a7f717a77d8d722c0.js.map