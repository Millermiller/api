webpackJsonp([10],{501:function(t,e,n){var a=n(0)(n(516),n(517),null,null,null);t.exports=a.exports},516:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{edited:{id:"",name:""},categories:[],newcategory:"",isComponentModalActive:!1}},mounted:function(){this.load()},methods:{load:function(){var t=this;this.$http.get("/admin/categories").then(function(e){t.categories=e.body},function(t){console.log(t)})},edit:function(t){this.edited=t,this.isComponentModalActive=!0},update:function(){var t=this;this.$http.put("/admin/categories/"+this.edited.id,this.edited).then(function(e){200===e.status?(t.isComponentModalActive=!1,t.$snackbar.open("Обновлено"),t.load()):t.$snackbar.open("Ошибка!")},function(t){console.log(t)})},add:function(){var t=this;this.$http.post("/admin/categories",{name:this.newcategory}).then(function(e){201===e.status?t.load():(t.$snackbar.open("Ошибка!"),console.log(e))},function(t){console.log(t)})},remove:function(t){var e=this;confirm("Удалить?")&&this.$http.delete("/admin/categories/"+t.id).then(function(t){204===t.status?(e.$snackbar.open("Категория удалена!"),e.load()):e.$snackbar.open("Ошибка!")},function(t){e.$snackbar.open("Ошибка!"),console.log(t)})}}}},517:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"tile is-ancestor"},[n("div",{staticClass:"tile is-parent"},[n("article",{staticClass:"tile is-child box"},[n("b-field",[n("b-input",{model:{value:t.newcategory,callback:function(e){t.newcategory=e},expression:"newcategory"}}),t._v(" "),n("p",{staticClass:"control"},[n("button",{staticClass:"button is-success",on:{click:t.add}},[t._v("Добавить")])])],1),t._v(" "),n("b-table",{attrs:{data:t.categories,paginated:"",narrowed:"",loading:t.loading,"per-page":"10"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{field:"id",label:"ID",width:"40",sortable:"",numeric:""}},[t._v("\n                            "+t._s(e.row.id)+"\n                        ")]),t._v(" "),n("b-table-column",{attrs:{field:"name",label:"Name",sortable:""}},[t._v("\n                            "+t._s(e.row.name)+"\n                        ")]),t._v(" "),n("b-table-column",{attrs:{"custom-key":"actions"}},[n("button",{staticClass:"button  is-warning",on:{click:function(n){t.edit(e.row)}}},[n("b-icon",{attrs:{icon:"account-edit",size:"is-small"}})],1),t._v(" "),n("button",{staticClass:"button  is-danger",on:{click:function(n){t.remove(e.row)}}},[n("b-icon",{attrs:{icon:"account-remove",size:"is-small"}})],1)])]}}])}),t._v(" "),n("b-modal",{attrs:{active:t.isComponentModalActive,"has-modal-card":""},on:{"update:active":function(e){t.isComponentModalActive=e}}},[n("form",{attrs:{action:""}},[n("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[t._v("Категория")])]),t._v(" "),n("section",{staticClass:"modal-card-body"},[n("b-field",{attrs:{label:"Название"}},[n("b-input",{attrs:{type:"text"},model:{value:t.edited.name,callback:function(e){t.$set(t.edited,"name",e)},expression:"edited.name"}})],1)],1),t._v(" "),n("footer",{staticClass:"modal-card-foot"},[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){t.isComponentModalActive=!1}}},[t._v("Закрыть")]),t._v(" "),n("button",{staticClass:"button is-primary",on:{click:t.update}},[t._v("Сохранить")])])])])])],1)])])])},staticRenderFns:[]}}});
//# sourceMappingURL=10.683333b7b9af258dbafb.js.map