webpackJsonp([0,2,5,7,14,15],{520:function(t,s,e){var a=e(0)(e(539),e(540),null,null,null);t.exports=a.exports},521:function(t,s,e){var a=e(0)(e(541),e(542),null,null,null);t.exports=a.exports},525:function(t,s,e){var a=e(0)(e(547),e(548),function(t){e(545)},null,null);t.exports=a.exports},526:function(t,s,e){var a=e(0)(e(549),e(550),null,null,null);t.exports=a.exports},527:function(t,s,e){var a=e(0)(e(551),e(552),null,null,null);t.exports=a.exports},532:function(t,s,e){var a=e(0)(e(563),e(564),null,null,null);t.exports=a.exports},539:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={props:["item","index"],data:function(){return{}},methods:{}}},540:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-6"},[e("p",{staticClass:"control content"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.item.text,expression:"item.text"}],staticClass:"textarea",attrs:{placeholder:"оригинал"},domProps:{value:t.item.text},on:{input:function(s){s.target.composing||t.$set(t.item,"text",s.target.value)}}})])]),t._v(" "),e("div",{staticClass:"column is-5"},[e("p",{staticClass:"control content"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.item.value,expression:"item.value"}],staticClass:"textarea",attrs:{placeholder:"оригинал"},domProps:{value:t.item.value},on:{input:function(s){s.target.composing||t.$set(t.item,"value",s.target.value)}}})])]),t._v(" "),e("div",{staticClass:"column is-1"},[e("a",{class:["button","is-danger","is-small"],on:{click:function(s){t.$emit("remove",t.index)}}},[t._m(0)])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-trash-o"})])}]}},541:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a,i=e(520),n=(a=i)&&a.__esModule?a:{default:a};s.default={data:function(){return{fileUploadFormData:new FormData,text:"",values:[],examples:[]}},components:{Example:n.default},props:["visible","card","index"],methods:{bindFile:function(t){t.preventDefault(),this.fileUploadFormData.append("audiofile",t.target.files[0]),this.fileUploadFormData.append("id",this.card.word.id)},close:function(){this.$emit("close")},updateAudio:function(){var t=this;this.$http.post("/admin/audio",this.fileUploadFormData).then(function(s){s.body.success&&t.$store.commit("changeAssetAudio",{index:t.index,url:s.body.url})},function(t){console.log(t)})},updateTranslate:function(){var t=this;this.$http.post("/admin/translate",{card_id:this.card.id,id:this.card.translate.id,text:this.text,examples:this.examples}).then(function(s){s.body.success&&t.$store.commit("changeAssetWord",{index:t.index,text:t.text}),t.close()},function(t){console.log(t)})},setActive:function(t){var s=this;this.$http.post("/admin/changeUsedTranslate",{card_id:this.card.id,word_id:this.card.word.id,translate_id:t.id}).then(function(e){if(e.body.success){for(var a in s.text=t.value,s.values)s.values[a].active=!1;t.active=!0,s.$store.commit("changeAssetTranslate",{index:s.index,translate:t}),s.close()}},function(t){console.log(t)})},play:function(){this.$refs.audio.play()},addExample:function(){this.examples.push({text:"",value:""})},removeExample:function(t){this.examples.splice(t,1)}},watch:{visible:function(t){var s=this;t&&(this.$http.get("/admin/values/"+this.card.word_id).then(function(t){for(var e in s.values=t.body.values,s.values)s.values[e].id===s.card.translate_id&&(s.values[e].active=!0)},function(t){console.log(t)}),this.$http.get("/admin/examples/"+this.card.id).then(function(t){s.examples=t.body.values},function(t){console.log(t)}))}},mounted:function(){this.text=this.card.translate?this.card.translate.value:""}}},542:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("b-modal",{attrs:{active:t.visible},on:{"update:active":function(s){t.visible=s},close:t.close}},[e("div",{staticClass:"box"},[e("div",{staticClass:"header"},[t._v(t._s(t.card.id)+" - "+t._s(t.card.word.word))]),t._v(" "),e("div",{staticClass:"translate-section"},[e("p",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"input",staticStyle:{width:"490px"},attrs:{type:"text",placeholder:"text"},domProps:{value:t.card.word.word,value:t.text},on:{input:function(s){s.target.composing||(t.text=s.target.value)}}})]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"variants"},[e("h2",{staticClass:"subtitle is-5"},[t._v("Варианты перевода:")]),t._v(" "),e("ul",t._l(t.values,function(s){return e("li",{class:["variant",{"is-success":s.active}],on:{click:function(e){t.setActive(s)}}},[t._v("\n                        "+t._s(s.value)+"\n                    ")])}))])]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"example-section"},[e("h2",{staticClass:"subtitle is-5"},[t._v("\n                Примеры: "),e("span",{staticClass:"button is-success pull-right",on:{click:t.addExample}},[t._v("добавить")])]),t._v(" "),e("div",t._l(t.examples,function(s,a){return e("example",{key:s.id,attrs:{item:s,index:a},on:{remove:t.removeExample}})}))]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"audio-section"},[e("audio",{ref:"audio",attrs:{src:t.card.word.audio,preload:"auto"}}),t._v(" "),e("a",{class:["button","is-small"],on:{click:t.play}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-volume-up"})])]),t._v(" "),e("form",{ref:"audioform",attrs:{enctype:"multipart/form-data",action:"",method:"post",name:"addAudio"}},[e("input",{attrs:{type:"file",name:"audiofile"},on:{change:t.bindFile}}),t._v(" "),e("a",{staticClass:"button is-success",on:{click:t.updateAudio}},[t._v("Загрузить аудио")]),t._v(" "),e("a",{staticClass:"button is-success",on:{click:t.updateTranslate}},[t._v("Сохранить")]),t._v(" "),e("a",{staticClass:"button is-warning",on:{click:t.close}},[t._v("Отмена")])])])])])},staticRenderFns:[]}},545:function(t,s,e){var a=e(546);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(524)("35ccf22a",a,!0)},546:function(t,s,e){(t.exports=e(523)(!0)).push([t.i,"\np.column.control-block {\n    padding: .75rem 0;\n}\n","",{version:3,sources:["C:/OpenServer/domains/scandinaver/scandinaver/resources/assets/sub/backend/client/views/assets/asset.vue"],names:[],mappings:";AACA;IACI,kBAAkB;CACrB",file:"asset.vue",sourcesContent:["\np.column.control-block {\n    padding: .75rem 0;\n}\n"],sourceRoot:""}])},547:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={props:["item"],data:function(){return{loaded:!1}},methods:{load:function(t){var s=this;this.loaded=!0,this.$http.get("/admin/asset/"+t).then(function(t){t.body.success?(s.loaded=!1,s.$store.commit("setActiveAsset",t.body.data)):s.$snackbar.open("Ошибка!")},function(t){console.log(t)})},forvo:function(t){var s=this;if(!confirm("Загрузить аудио?"))return!1;this.loaded=!0,this.$http.post("/admin/forvo/"+t).then(function(t){t.body.success?(s.loaded=!1,s.$snackbar.open("Завершено!"+t.body.count+" из "+t.body.all)):s.$snackbar.open("Ошибка!")},function(t){console.log(t)})}},computed:{activeAssetId:function(){return this.$store.getters.activeAssetId}}}},548:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("li",{staticClass:"columns"},[e("p",{class:["column","is-7",{info:t.item.id==t.activeAssetId}]},[t._v("\n        "+t._s(t.item.level)+". "+t._s(t.item.title)+" "),e("span",{staticClass:"text-success"},[t._v("("+t._s(t.item.cards_count)+")")])]),t._v(" "),e("p",{class:["column control-block","is-5"]},[e("a",{class:["button","is-small"],on:{click:function(s){t.$emit("edit",t.item)}}},[t._m(0)]),t._v(" "),e("a",{class:["button","is-small"],on:{click:function(s){t.load(t.item.id)}}},[t._m(1)]),t._v(" "),e("a",{class:["button","is-small",{"is-loading":t.loaded}],on:{click:function(s){t.forvo(t.item.id)}}},[t._v("Forvo")]),t._v(" "),e("a",{class:["button","is-danger","is-small"],on:{click:function(s){t.$emit("remove",t.item)}}},[t._m(2)])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-pencil"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-eye"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-trash-o"})])}]}},549:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a,i=e(521),n=(a=i)&&a.__esModule?a:{default:a};s.default={props:["card","index"],components:{Modal:n.default},data:function(){return{settingsModal:!1}},methods:{showSettingsModal:function(){this.settingsModal=!0},closeSettingsModal:function(){this.settingsModal=!1},play:function(){this.$refs.audio.play()}}}},550:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("span",{staticClass:"asset_title"},[t._v(t._s(t.card.word.word))])]),t._v(" "),e("div",{staticClass:"column"},[t.card.translate?e("p",{staticClass:"is-pulled-left has-text-dark"},[t._v(t._s(t.card.translate.value))]):t._e(),t._v(" "),t.card.word.variants>1?e("span",{staticClass:"is-pulled-right has-text-light"},[t._v("("+t._s(t.card.word.variants)+")")]):t._e()]),t._v(" "),e("div",{staticClass:"column"},[e("audio",{ref:"audio",attrs:{src:t.card.word.audio,preload:"auto"}}),t._v(" "),e("a",{class:["button","is-small",{danger:!t.card.word.audio}],on:{click:t.play}},[t._m(0)]),t._v(" "),e("a",{class:["button","is-small"],on:{click:t.showSettingsModal}},[t._m(1)]),t._v(" "),e("a",{class:["button","is-danger","is-small"],on:{click:function(s){t.$emit("remove",{card:t.card,index:t.index})}}},[t._m(2)])]),t._v(" "),e("modal",{attrs:{visible:t.settingsModal,card:t.card,index:t.index},on:{close:t.closeSettingsModal}})],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-volume-up"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-pencil"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-trash-o"})])}]}},551:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={props:["item","index"],data:function(){return{}},methods:{add:function(){var t=this,s={word_id:this.item.id,translate_id:this.item.translate_id,asset_id:this.$store.getters.activeAssetId,index:this.index};this.$http.post("/card",s).then(function(s){s.body.success&&(t.$store.commit("addCard",s.body.card),t.$emit("increment",t.index))},function(t){})}}}},552:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("span",{staticClass:"asset_title"},[t._v(t._s(t.item.word))])]),t._v(" "),e("div",{staticClass:"column"},[e("span",{staticClass:"asset_title"},[t._v(t._s(t.item.value))])]),t._v(" "),e("div",{staticClass:"column"},[e("a",{class:["button","is-success","is-small"],on:{click:t.add}},[t._m(0)]),t._v(" "),e("a",{class:["button","is-danger","is-small"],on:{click:function(s){t.$emit("remove",{item:t.item,index:t.index})}}},[t._m(1)])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus",staticStyle:{color:"#fff"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-trash-o"})])}]}},563:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=o(e(525)),i=o(e(526)),n=o(e(527));function o(t){return t&&t.__esModule?t:{default:t}}s.default={components:{Asset:a.default,Card:i.default,Translate:n.default},data:function(){return{words:[],sentences:[],text:"",translates:[],sentence:0,searchloaded:!1,sentencesloaded:!1,isComponentModalActive:!1,editedAsset:{id:"",basic:"",type:"",level:"",title:""}}},methods:{assetEdit:function(t){console.log(t),this.editedAsset=t,this.isComponentModalActive=!0},load:function(){var t=this;this.$http.get("/admin/assets").then(function(s){t.words=s.body.words,t.sentences=s.body.sentences},function(t){console.log(t)})},removeCard:function(t){this.$store.dispatch("removeCard",t),this.decrement()},removeAsset:function(t){var s=this;this.$http.delete("/asset/"+t.id).then(function(t){s.load()},function(t){console.log(t)})},addAsset:function(t){var s=this;this.$http.post("/admin/level",{asset_id:t}).then(function(t){s.load()},function(t){console.log(t)})},search:function(){var t=this;if(""===this.text)return!1;this.searchloaded=!0,this.$http.get("/translate",{params:{word:this.text,sentence:+this.sentence}}).then(function(s){s.body.success||(console.log(s.body.message),t.translates=[],t.searchloaded=!1),t.translates=s.body.translate,t.searchloaded=!1},function(t){console.log(t)})},searchsentences:function(){var t=this;this.sentencesloaded=!0,this.$http.get("/admin/sentences").then(function(s){t.translates=s.body,t.sentencesloaded=!1},function(t){console.log(t)})},removeTranslate:function(t){var s=this;this.$http.delete("/admin/translate/"+t.item.id).then(function(e){e.body.success&&s.translates.splice(t.index,1)},function(t){console.log(t)})},increment:function(t){var s=this.$store.getters.activeAssetId;this.words.forEach(function(t,e){t.id===s&&t.cards_count++})},decrement:function(){var t=this.$store.getters.activeAssetId;this.words.forEach(function(s,e){s.id===t&&s.cards_count--})},updateTitle:function(){var t=this;this.$http.post("/admin/asset/"+this.editedAsset.id,{text:this.editedAsset.title}).then(function(s){s.body.success?t.$snackbar.open("Обновлено"):t.$snackbar.open("Ошибка"),t.close()},function(t){console.log(t)})},close:function(){this.isComponentModalActive=!1}},mounted:function(){this.load()},computed:{cards:function(){return this.$store.getters.cards}}}},564:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-4 asset-column"},[e("div",{staticClass:"box"},[e("b-tabs",[e("b-tab-item",{attrs:{label:"слова"}},[e("button",{staticClass:"button is-small",staticStyle:{margin:"10px 0"},on:{click:function(s){t.addAsset(1)}}},[t._v("Добавить")]),t._v(" "),e("ul",t._l(t.words,function(s){return e("asset",{attrs:{item:s},on:{edit:t.assetEdit,remove:t.removeAsset}})}))]),t._v(" "),e("b-tab-item",{attrs:{label:"предложения"}},[e("button",{staticClass:"button is-small",staticStyle:{margin:"10px 0"},on:{click:function(s){t.addAsset(2)}}},[t._v("Добавить")]),t._v(" "),e("ul",t._l(t.sentences,function(s){return e("asset",{attrs:{item:s},on:{change:t.load,remove:t.removeAsset}})}))])],1)],1)]),t._v(" "),e("div",{staticClass:"column is-4 cards-column"},[e("div",{staticClass:"box"},t._l(t.cards,function(s,a){return e("card",{key:s.id,attrs:{card:s,index:a},on:{remove:t.removeCard}})}))]),t._v(" "),e("div",{staticClass:"column is-4 translate-column"},[e("div",{staticClass:"box"},[e("div",{staticClass:"block"},[e("p",{staticClass:"control has-addons"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"input",attrs:{type:"text",placeholder:"rus"},domProps:{value:t.text},on:{input:function(s){s.target.composing||(t.text=s.target.value)}}}),t._v(" "),e("a",{class:["button",{"is-loading":t.searchloaded}],on:{click:t.search}},[t._v("Искать")]),t._v(" "),e("a",{class:["button",{"is-loading":t.sentencesloaded}],on:{click:t.searchsentences}},[t._v("Предложения")])])]),t._v(" "),e("div",{staticClass:"block"},t._l(t.translates,function(s,a){return e("translate",{attrs:{item:s,index:a},on:{increment:t.increment,remove:t.removeTranslate}})}))])]),t._v(" "),e("b-modal",{attrs:{active:t.isComponentModalActive},on:{"update:active":function(s){t.isComponentModalActive=s},close:t.close}},[e("div",{staticClass:"box"},[e("div",{staticClass:"translate-section"},[e("p",[t._v("\n                    Asset id="+t._s(t.editedAsset.id)+" basic="+t._s(t.editedAsset.basic)+" type="+t._s(t.editedAsset.type)+" level="+t._s(t.editedAsset.level)+" favorite="+t._s(t.editedAsset.favorite)+"\n                ")]),t._v(" "),e("b-field",[e("b-input",{staticStyle:{width:"430px"},attrs:{type:"text",placeholder:"text"},model:{value:t.editedAsset.title,callback:function(s){t.$set(t.editedAsset,"title",s)},expression:"editedAsset.title"}}),t._v(" "),e("p",{staticClass:"control"},[e("button",{staticClass:"button is-success",on:{click:t.updateTitle}},[t._v("Сохранить")])]),t._v(" "),e("p",{staticClass:"control"},[e("button",{staticClass:"button is-warning",on:{click:t.close}},[t._v("Отмена")])])],1)],1)])])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=0.694e054c626fc77d34fa.js.map